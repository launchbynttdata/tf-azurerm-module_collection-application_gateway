# tf-azurerm-module_collection-application_gateway
In this example, we deploy an application gateway with a backend pool and HTTP listener. Creating a backend pool is madatory for deployment of the app gateway. The backend pool contains a windows server 2022 VM which is not created as part of terraform setup. The public address "74.249.99.178" specified in backend pool settings is placeholder IP address of that VM. The example creates a vnet, subnet, resource group where app gateway will reside. The example also demonstrates creation of multiple app gateway service instances using variable of type `map(object)`

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | <= 1.5.5 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | ~> 3.77 |
| <a name="requirement_random"></a> [random](#requirement\_random) | ~> 3.6 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_tls"></a> [tls](#provider\_tls) | 4.0.5 |
| <a name="provider_local"></a> [local](#provider\_local) | 2.5.1 |
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | 3.101.0 |
| <a name="provider_random"></a> [random](#provider\_random) | 3.6.1 |
| <a name="provider_null"></a> [null](#provider\_null) | 3.2.2 |
| <a name="provider_http"></a> [http](#provider\_http) | 3.4.2 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_app_gateway"></a> [app\_gateway](#module\_app\_gateway) | ../.. | n/a |
| <a name="module_resource_names"></a> [resource\_names](#module\_resource\_names) | git::https://github.com/launchbynttdata/tf-launch-module_library-resource_name.git | 1.0.0 |
| <a name="module_resource_group"></a> [resource\_group](#module\_resource\_group) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-resource_group.git | 1.0.0 |
| <a name="module_user_managed_identity"></a> [user\_managed\_identity](#module\_user\_managed\_identity) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-user_managed_identity.git | 1.0.0 |
| <a name="module_role_assignment_owner"></a> [role\_assignment\_owner](#module\_role\_assignment\_owner) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-role_assignment.git | 1.0.0 |
| <a name="module_role_assignment"></a> [role\_assignment](#module\_role\_assignment) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-role_assignment.git | 1.0.0 |
| <a name="module_key_vault"></a> [key\_vault](#module\_key\_vault) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-key_vault.git | 2.0.0 |
| <a name="module_network"></a> [network](#module\_network) | Azure/vnet/azurerm | 4.1.0 |
| <a name="module_network_security_group"></a> [network\_security\_group](#module\_network\_security\_group) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-network_security_group.git | 1.0.0 |
| <a name="module_nsg_subnet_association"></a> [nsg\_subnet\_association](#module\_nsg\_subnet\_association) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-nsg_subnet_association.git | 1.0.0 |
| <a name="module_storage_account"></a> [storage\_account](#module\_storage\_account) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-storage_account.git | feature/static-hosting |
| <a name="module_private_dns_zone"></a> [private\_dns\_zone](#module\_private\_dns\_zone) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-private_dns_zone.git | 1.0.0 |
| <a name="module_private_dns_zone_link"></a> [private\_dns\_zone\_link](#module\_private\_dns\_zone\_link) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-private_dns_vnet_link.git | 1.0.0 |
| <a name="module_private_dns_records"></a> [private\_dns\_records](#module\_private\_dns\_records) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-private_dns_records.git | 1.0.0 |
| <a name="module_jumpbox_nic"></a> [jumpbox\_nic](#module\_jumpbox\_nic) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-network_interface.git | 1.0.0 |
| <a name="module_jumpbox_pip"></a> [jumpbox\_pip](#module\_jumpbox\_pip) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-public_ip.git | 1.0.0 |
| <a name="module_windows_vm_jumpbox"></a> [windows\_vm\_jumpbox](#module\_windows\_vm\_jumpbox) | git::https://github.com/launchbynttdata/tf-azurerm-module_primitive-windows_virtual_machine.git | 1.0.0 |

## Resources

| Name | Type |
|------|------|
| [azurerm_key_vault_certificate.key_vault_certificate](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/key_vault_certificate) | resource |
| [local_file.ca_cert](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [local_file.ca_cert_private_key](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [local_file.cert_private_key](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [local_file.locally_signed_cert](https://registry.terraform.io/providers/hashicorp/local/latest/docs/resources/file) | resource |
| [null_resource.pem2pfx_ca_cert](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |
| [null_resource.pem2pfx_server_cert](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |
| [null_resource.upload_static_website_files](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |
| [random_string.password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) | resource |
| [tls_cert_request.cert_request](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/cert_request) | resource |
| [tls_locally_signed_cert.server_cert](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/locally_signed_cert) | resource |
| [tls_private_key.ca_cert_private_key](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key) | resource |
| [tls_private_key.cert_private_key](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key) | resource |
| [tls_self_signed_cert.ca_cert](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/self_signed_cert) | resource |
| [azurerm_client_config.current](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/client_config) | data source |
| [azurerm_key_vault_certificate.key_vault_certificate](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/key_vault_certificate) | data source |
| [http_http.ip](https://registry.terraform.io/providers/hashicorp/http/latest/docs/data-sources/http) | data source |
| [local_file.ca_certificate_pfx](https://registry.terraform.io/providers/hashicorp/local/latest/docs/data-sources/file) | data source |
| [local_file.server_certificate_pfx](https://registry.terraform.io/providers/hashicorp/local/latest/docs/data-sources/file) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_app_gateways"></a> [app\_gateways](#input\_app\_gateways) | Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at  http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. | <pre>map(object({<br>    appgw_backend_http_settings = list(object({<br>      name                                = string<br>      port                                = optional(number, 443)<br>      protocol                            = optional(string, "Https")<br>      path                                = optional(string)<br>      probe_name                          = optional(string)<br>      cookie_based_affinity               = optional(string, "Disabled")<br>      affinity_cookie_name                = optional(string, "ApplicationGatewayAffinity")<br>      request_timeout                     = optional(number, 20)<br>      host_name                           = optional(string)<br>      pick_host_name_from_backend_address = optional(bool, true)<br>      trusted_root_certificate_names      = optional(list(string), [])<br>      authentication_certificate          = optional(string)<br>      connection_draining_timeout_sec     = optional(number)<br>    })),<br>    appgw_backend_pools = optional(list(object({<br>      name         = string<br>      fqdns        = optional(list(string))<br>      ip_addresses = optional(list(string))<br>    }))),<br>    appgw_http_listeners = list(object({<br>      name                           = string<br>      frontend_ip_configuration_name = optional(string)<br>      frontend_port_name             = optional(string)<br>      host_name                      = optional(string)<br>      host_names                     = optional(list(string))<br>      protocol                       = optional(string, "Https")<br>      require_sni                    = optional(bool, false)<br>      ssl_certificate_name           = optional(string)<br>      ssl_profile_name               = optional(string)<br>      firewall_policy_id             = optional(string)<br>      custom_error_configuration = optional(list(object({<br>        status_code           = string<br>        custom_error_page_url = string<br>      })), [])<br>    })),<br>    appgw_routings = list(object({ name = string<br>      rule_type                   = optional(string, "Basic")<br>      http_listener_name          = optional(string)<br>      backend_address_pool_name   = optional(string)<br>      backend_http_settings_name  = optional(string)<br>      url_path_map_name           = optional(string)<br>      redirect_configuration_name = optional(string)<br>      rewrite_rule_set_name       = optional(string)<br>      priority                    = optional(number)<br>    })),<br>    appgw_url_path_map = optional(list(object({<br>      name                                = string<br>      default_backend_address_pool_name   = optional(string)<br>      default_redirect_configuration_name = optional(string)<br>      default_backend_http_settings_name  = optional(string)<br>      default_rewrite_rule_set_name       = optional(string)<br>      path_rules = list(object({<br>        name                        = string<br>        backend_address_pool_name   = optional(string)<br>        backend_http_settings_name  = optional(string)<br>        rewrite_rule_set_name       = optional(string)<br>        redirect_configuration_name = optional(string)<br>        paths                       = optional(list(string), [])<br>      }))<br>    })), []),<br>    trusted_root_certificate_configs = optional(list(object({<br>      name                = string<br>      data                = optional(string)<br>      file_path           = optional(string)<br>      key_vault_secret_id = optional(string)<br>    })), []),<br>    ssl_certificates_configs = optional(list(object({<br>      name                = string<br>      data                = optional(string)<br>      password            = optional(string)<br>      key_vault_secret_id = optional(string)<br>    })), []),<br>    client_name           = string,<br>    environment           = string,<br>    location_short        = optional(string, ""),<br>    logs_destinations_ids = list(string),<br>    stack                 = string,<br>    app_gateway_tags      = optional(map(string), {}),<br>    custom_appgw_name     = optional(string, ""),<br>    create_subnet         = bool,<br>    appgw_rewrite_rule_set = optional(list(object({<br>      name = string<br>      rewrite_rules = list(object({<br>        name          = string<br>        rule_sequence = string<br>        conditions = optional(list(object({<br>          variable    = string<br>          pattern     = string<br>          ignore_case = optional(bool, false)<br>          negate      = optional(bool, false)<br>          })),<br>        [])<br>        response_header_configurations = optional(list(object({<br>          header_name = string<br>          header_value = string })),<br>        [])<br>        request_header_configurations = optional(list(object({<br>          header_name = string<br>          header_value = string })),<br>        [])<br>        url_reroute = optional(object({<br>          path         = optional(string)<br>          query_string = optional(string)<br>          components   = optional(string)<br>          reroute      = optional(bool)<br>        }))<br>      }))<br>    })), []),<br>    appgw_probes = optional(list(object({<br>      name                                      = string<br>      host                                      = optional(string)<br>      port                                      = optional(number, null)<br>      interval                                  = optional(number, 30)<br>      path                                      = optional(string, "/")<br>      protocol                                  = optional(string, "Https")<br>      timeout                                   = optional(number, 30)<br>      unhealthy_threshold                       = optional(number, 3)<br>      pick_host_name_from_backend_http_settings = optional(bool, false)<br>      minimum_servers                           = optional(number, 0)<br>      match = optional(object(<br>        {<br>          body        = optional(string, "")<br>          status_code = optional(list(string), ["200-399"])<br>      }), {})<br>    })), []),<br>    frontend_port_settings = list(object({<br>      name = string<br>      port = number<br>    }))<br>    autoscaling_parameters = optional(object({<br>      min_capacity = number,<br>      max_capacity = optional(number, 5) }<br>    ), null),<br>    user_assigned_identity_id                  = optional(string, null),<br>    subnet_cidr                                = string,<br>    custom_ip_name                             = optional(string, "")<br>    custom_ip_label                            = optional(string, "")<br>    custom_frontend_ip_configuration_name      = optional(string, "")<br>    appgw_private                              = optional(bool, false)<br>    appgw_private_ip                           = optional(string, "")<br>    custom_frontend_priv_ip_configuration_name = optional(string, "")<br>    ip_allocation_method                       = optional(string, "Static")<br>    ip_sku                                     = optional(string, "Standard")<br>    ip_tags                                    = optional(map(string), {})<br>    ip_ddos_protection_mode                    = optional(string, "Disabled")<br>    ip_ddos_protection_plan_id                 = optional(string, null)<br>    create_nsg                                 = optional(bool, false)<br>    create_nsg_healthprobe_rule                = optional(bool, false)<br>    create_nsg_https_rule                      = optional(bool, false)<br>    custom_nsg_name                            = optional(string, "")<br>    custom_nsr_healthcheck_name                = optional(string, "")<br>    custom_nsr_https_name                      = optional(string, "")<br>    custom_subnet_name                         = optional(string, "")<br>    enable_http2                               = optional(bool, false)<br>    firewall_policy_id                         = optional(string, null)<br>    force_firewall_policy_association          = optional(bool, false)<br>    nsr_https_source_address_prefix            = optional(string, "")<br>  }))</pre> | n/a | yes |
| <a name="input_resource_names_map"></a> [resource\_names\_map](#input\_resource\_names\_map) | A map of key to resource\_name that will be used by tf-launch-module\_library-resource\_name to generate resource names | <pre>map(object({<br>    name       = string<br>    max_length = optional(number, 60)<br>  }))</pre> | <pre>{<br>  "app_gateway": {<br>    "max_length": 80,<br>    "name": "appgw"<br>  },<br>  "app_service": {<br>    "max_length": 80,<br>    "name": "appsvc"<br>  },<br>  "network_security_group": {<br>    "max_length": 80,<br>    "name": "nsg"<br>  },<br>  "resource_group": {<br>    "max_length": 90,<br>    "name": "rg"<br>  },<br>  "vnet": {<br>    "max_length": 80,<br>    "name": "vnet"<br>  },<br>  "web_app_images": {<br>    "max_length": 80,<br>    "name": "webapp"<br>  },<br>  "web_app_videos": {<br>    "max_length": 80,<br>    "name": "webapp"<br>  }<br>}</pre> | no |
| <a name="input_environment_number"></a> [environment\_number](#input\_environment\_number) | The environment count for the respective environment. Defaults to 000. Increments in value of 1 | `string` | `"000"` | no |
| <a name="input_resource_number"></a> [resource\_number](#input\_resource\_number) | The resource count for the respective resource. Defaults to 000. Increments in value of 1 | `string` | `"000"` | no |
| <a name="input_logical_product_family"></a> [logical\_product\_family](#input\_logical\_product\_family) | (Required) Name of the product family for which the resource is created.<br>    Example: org\_name, department\_name. | `string` | `"launch"` | no |
| <a name="input_logical_product_service"></a> [logical\_product\_service](#input\_logical\_product\_service) | (Required) Name of the product service for which the resource is created.<br>    For example, backend, frontend, middleware etc. | `string` | `"network"` | no |
| <a name="input_subnet_prefixes"></a> [subnet\_prefixes](#input\_subnet\_prefixes) | (Required) The address prefix to use for the subnet. | `list(string)` | n/a | yes |
| <a name="input_address_space"></a> [address\_space](#input\_address\_space) | (Required)The address space that is used by the virtual network. | `list(string)` | n/a | yes |
| <a name="input_subnet_names"></a> [subnet\_names](#input\_subnet\_names) | (Required) The names of the subnets to be created. | `list(string)` | n/a | yes |
| <a name="input_environment"></a> [environment](#input\_environment) | (Required) Project environment. | `string` | n/a | yes |
| <a name="input_location"></a> [location](#input\_location) | (Required) Azure location. | `string` | n/a | yes |
| <a name="input_vm_name"></a> [vm\_name](#input\_vm\_name) | Name of the virtual machine | `string` | `"example-machine"` | no |
| <a name="input_jumpbox_name"></a> [jumpbox\_name](#input\_jumpbox\_name) | Name of the virtual machine | `string` | `"jumpbox-machine"` | no |
| <a name="input_vm_nic_name"></a> [vm\_nic\_name](#input\_vm\_nic\_name) | Name of the virtual machine | `string` | `"example-nic"` | no |
| <a name="input_jumpbox_nic_name"></a> [jumpbox\_nic\_name](#input\_jumpbox\_nic\_name) | Name of the virtual machine | `string` | `"jumpbox-example-nic"` | no |
| <a name="input_vm_priority"></a> [vm\_priority](#input\_vm\_priority) | Priority of the virtual machine | `string` | `"Regular"` | no |
| <a name="input_eviction_policy"></a> [eviction\_policy](#input\_eviction\_policy) | Eviction policy of the virtual machine | `string` | `"Deallocate"` | no |
| <a name="input_vm_size"></a> [vm\_size](#input\_vm\_size) | Size of the virtual machine | `string` | `"Standard_F2"` | no |
| <a name="input_vm_username"></a> [vm\_username](#input\_vm\_username) | value of the username | `string` | `"adminuser"` | no |
| <a name="input_custom_data"></a> [custom\_data](#input\_custom\_data) | Custom script path that allows to run commands on the virtual machine at the time of provisioning. | `string` | `"scripts/init.sh"` | no |
| <a name="input_admin_ssh_key"></a> [admin\_ssh\_key](#input\_admin\_ssh\_key) | SSH key for the virtual machine | <pre>object({<br>    username        = string<br>    public_key_path = string<br>  })</pre> | <pre>{<br>  "public_key_path": "~/.ssh/id_rsa.pub",<br>  "username": "adminuser"<br>}</pre> | no |
| <a name="input_os_disk"></a> [os\_disk](#input\_os\_disk) | OS disk configuration | <pre>object({<br>    caching              = string<br>    storage_account_type = string<br>  })</pre> | <pre>{<br>  "caching": "ReadWrite",<br>  "storage_account_type": "Standard_LRS"<br>}</pre> | no |
| <a name="input_source_image_reference"></a> [source\_image\_reference](#input\_source\_image\_reference) | Source image reference | <pre>object({<br>    publisher = string<br>    offer     = string<br>    sku       = string<br>    version   = string<br>  })</pre> | <pre>{<br>  "offer": "0001-com-ubuntu-server-jammy",<br>  "publisher": "Canonical",<br>  "sku": "22_04-lts",<br>  "version": "latest"<br>}</pre> | no |
| <a name="input_jumpbox_source_image_reference"></a> [jumpbox\_source\_image\_reference](#input\_jumpbox\_source\_image\_reference) | Source image reference | <pre>object({<br>    publisher = string<br>    offer     = string<br>    sku       = string<br>    version   = string<br>  })</pre> | <pre>{<br>  "offer": "WindowsServer",<br>  "publisher": "MicrosoftWindowsServer",<br>  "sku": "2016-Datacenter",<br>  "version": "latest"<br>}</pre> | no |
| <a name="input_vm_nic_ip_configuration"></a> [vm\_nic\_ip\_configuration](#input\_vm\_nic\_ip\_configuration) | Attributes of the network interface to be created. | <pre>object({<br>    name                          = string<br>    private_ip_address_allocation = string<br>  })</pre> | <pre>{<br>  "name": "internal",<br>  "private_ip_address_allocation": "Dynamic"<br>}</pre> | no |
| <a name="input_jumpbox_vm_nic_ip_configuration"></a> [jumpbox\_vm\_nic\_ip\_configuration](#input\_jumpbox\_vm\_nic\_ip\_configuration) | Attributes of the network interface to be created. | <pre>object({<br>    name                          = string<br>    private_ip_address_allocation = string<br>    subnet_id                     = optional(string)<br>  })</pre> | <pre>{<br>  "name": "jumpbox-internal",<br>  "private_ip_address_allocation": "Dynamic"<br>}</pre> | no |
| <a name="input_security_rules"></a> [security\_rules](#input\_security\_rules) | (Optional) A list of security rules associated with the network security group. | <pre>list(object({<br>    name                                       = string<br>    protocol                                   = string<br>    access                                     = string<br>    priority                                   = number<br>    direction                                  = string<br>    description                                = optional(string)<br>    source_port_range                          = optional(string)<br>    source_port_ranges                         = optional(list(string))<br>    destination_port_range                     = optional(string)<br>    destination_port_ranges                    = optional(list(string))<br>    source_address_prefix                      = optional(string)<br>    source_address_prefixes                    = optional(list(string))<br>    source_application_security_group_ids      = optional(list(string))<br>    destination_address_prefix                 = optional(string)<br>    destination_address_prefixes               = optional(list(string))<br>    destination_application_security_group_ids = optional(list(string))<br>  }))</pre> | `null` | no |
| <a name="input_public_ip_name"></a> [public\_ip\_name](#input\_public\_ip\_name) | Name of the public ip | `string` | `"example-public-ip"` | no |
| <a name="input_public_ip_allocation"></a> [public\_ip\_allocation](#input\_public\_ip\_allocation) | Ip allocation method | `string` | `"Dynamic"` | no |
| <a name="input_public_ip_idle_timeout_in_minutes"></a> [public\_ip\_idle\_timeout\_in\_minutes](#input\_public\_ip\_idle\_timeout\_in\_minutes) | Idle timeout in minutes for the public ip | `number` | `30` | no |
| <a name="input_length"></a> [length](#input\_length) | Admin password generation | `number` | `24` | no |
| <a name="input_number"></a> [number](#input\_number) | n/a | `bool` | `true` | no |
| <a name="input_special"></a> [special](#input\_special) | n/a | `bool` | `false` | no |
| <a name="input_role_assignments"></a> [role\_assignments](#input\_role\_assignments) | Role assignments to be created | <pre>map(object({<br>    role_definition_name = string<br>  }))</pre> | `{}` | no |
| <a name="input_role_assignments_owner"></a> [role\_assignments\_owner](#input\_role\_assignments\_owner) | Role assignments to be created | <pre>map(object({<br>    role_definition_name = string<br>  }))</pre> | `{}` | no |
| <a name="input_enable_rbac_authorization"></a> [enable\_rbac\_authorization](#input\_enable\_rbac\_authorization) | Enable RBAC authorization for the key vault | `bool` | `false` | no |
| <a name="input_network_acls"></a> [network\_acls](#input\_network\_acls) | Network ACLs for the key vault | <pre>object({<br>    bypass                     = string<br>    default_action             = string<br>    ip_rules                   = optional(list(string))<br>    virtual_network_subnet_ids = optional(list(string))<br>  })</pre> | <pre>{<br>  "bypass": "AzureServices",<br>  "default_action": "Allow",<br>  "ip_rules": [],<br>  "virtual_network_subnet_ids": []<br>}</pre> | no |
| <a name="input_public_network_access_enabled"></a> [public\_network\_access\_enabled](#input\_public\_network\_access\_enabled) | (Optional) Whether public network access is allowed for this Key Vault. Defaults to true. | `bool` | `true` | no |
| <a name="input_certificates"></a> [certificates](#input\_certificates) | List of certificates to be imported. If `filepath` is specified then the pfx files should be present in the root of the module (path.root). If `content` is specified then the content of the certificate should be provided in base 64 encoded format. Only one of them should be provided. | <pre>map(object({<br>    contents = optional(string)<br>    filepath = optional(string)<br>    password = string<br>  }))</pre> | `{}` | no |
| <a name="input_algorithm"></a> [algorithm](#input\_algorithm) | Name of the algorithm to use when generating the private key. Currently-supported values are: RSA, ECDSA, ED25519. | `string` | `"RSA"` | no |
| <a name="input_rsa_bits"></a> [rsa\_bits](#input\_rsa\_bits) | Size of the RSA key to create in bits. Defaults to 2048 bits. | `number` | `4096` | no |
| <a name="input_ca_private_key"></a> [ca\_private\_key](#input\_ca\_private\_key) | Name for the Private key for the CA certificate file. | `string` | `"ca_private_key.pem"` | no |
| <a name="input_ca_certificate_attributes"></a> [ca\_certificate\_attributes](#input\_ca\_certificate\_attributes) | Attributes for the CA certificate. | <pre>object({<br>    dns_names         = list(string)<br>    is_ca_certificate = bool<br>    uris              = list(string)<br>    subject = object({<br>      common_name         = string<br>      country             = string<br>      locality            = string<br>      organization        = string<br>      organizational_unit = string<br>      province            = string<br>      postal_code         = string<br>      street_address      = list(string)<br>    })<br>    validity_period_hours = number<br>    allowed_uses          = list(string)<br>  })</pre> | <pre>{<br>  "allowed_uses": [<br>    "key_encipherment",<br>    "digital_signature",<br>    "server_auth",<br>    "cert_signing"<br>  ],<br>  "dns_names": [<br>    "contoso.com"<br>  ],<br>  "is_ca_certificate": true,<br>  "subject": {<br>    "common_name": "example.com",<br>    "country": "US",<br>    "locality": "Canton",<br>    "organization": "ACME Examples, Inc",<br>    "organizational_unit": "IT",<br>    "postal_code": "48187",<br>    "province": "MI",<br>    "street_address": [<br>      "1234",<br>      "Elm St"<br>    ]<br>  },<br>  "uris": [<br>    "https://*.contoso.com"<br>  ],<br>  "validity_period_hours": 1200<br>}</pre> | no |
| <a name="input_cert_private_key"></a> [cert\_private\_key](#input\_cert\_private\_key) | Name for the Private key for the CA certificate file. | `string` | `"cert_private_key.pem"` | no |
| <a name="input_server_certificate_attributes"></a> [server\_certificate\_attributes](#input\_server\_certificate\_attributes) | Attributes for the CA certificate. | <pre>object({<br>    dns_names = list(string)<br>    uris      = list(string)<br>    subject = object({<br>      common_name         = string<br>      country             = string<br>      locality            = string<br>      organization        = string<br>      organizational_unit = string<br>      province            = string<br>      postal_code         = string<br>      street_address      = list(string)<br>    })<br>    validity_period_hours = number<br>    allowed_uses          = list(string)<br>  })</pre> | <pre>{<br>  "allowed_uses": [<br>    "key_encipherment",<br>    "digital_signature",<br>    "server_auth"<br>  ],<br>  "dns_names": [<br>    "apgw.contoso.com",<br>    "apgw",<br>    "localhost",<br>    "myvm",<br>    "*.contoso.com"<br>  ],<br>  "is_ca_certificate": true,<br>  "subject": {<br>    "common_name": "contoso.com",<br>    "country": "US",<br>    "locality": "Canton",<br>    "organization": "ACME Examples, Inc",<br>    "organizational_unit": "IT",<br>    "postal_code": "48188",<br>    "province": "MI",<br>    "street_address": [<br>      "1234",<br>      "Duck St"<br>    ]<br>  },<br>  "uris": [<br>    "https://*.contoso.com"<br>  ],<br>  "validity_period_hours": 12<br>}</pre> | no |
| <a name="input_server_cert"></a> [server\_cert](#input\_server\_cert) | Server certificate name | `string` | `"server_cert.pem"` | no |
| <a name="input_ca_cert"></a> [ca\_cert](#input\_ca\_cert) | CA certificate name | `string` | `"ca_cert.pem"` | no |
| <a name="input_ca_cert_pfx"></a> [ca\_cert\_pfx](#input\_ca\_cert\_pfx) | CA certificate name(pfx format) | `string` | `"ca_cert.pfx"` | no |
| <a name="input_server_cert_pfx"></a> [server\_cert\_pfx](#input\_server\_cert\_pfx) | Server certificate name | `string` | `"server_cert.pfx"` | no |
| <a name="input_chained_cert"></a> [chained\_cert](#input\_chained\_cert) | Chain certificate name | `string` | `"chained_cert.pem"` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to add to the resources created by the module. | `map(string)` | `{}` | no |
| <a name="input_zone_name"></a> [zone\_name](#input\_zone\_name) | variables for private dns zone module | `string` | n/a | yes |
| <a name="input_registration_enabled"></a> [registration\_enabled](#input\_registration\_enabled) | (Optional) Is auto-registration of virtual machine records in the virtual network in the Private DNS zone enabled? Defaults to false. | `bool` | `false` | no |
| <a name="input_a_records"></a> [a\_records](#input\_a\_records) | A list of A records to create | <pre>map(object({<br>    name                = string<br>    resource_group_name = string<br>    zone_name           = string<br>    ttl                 = number<br>    records             = list(string)<br>    tags                = optional(map(string))<br>  }))</pre> | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_appgw_backend_address_pool_ids"></a> [appgw\_backend\_address\_pool\_ids](#output\_appgw\_backend\_address\_pool\_ids) | List of backend address pool Ids. |
| <a name="output_appgw_backend_http_settings_ids"></a> [appgw\_backend\_http\_settings\_ids](#output\_appgw\_backend\_http\_settings\_ids) | List of backend HTTP settings Ids. |
| <a name="output_appgw_backend_http_settings_probe_ids"></a> [appgw\_backend\_http\_settings\_probe\_ids](#output\_appgw\_backend\_http\_settings\_probe\_ids) | List of probe Ids from backend HTTP settings. |
| <a name="output_appgw_custom_error_configuration_ids"></a> [appgw\_custom\_error\_configuration\_ids](#output\_appgw\_custom\_error\_configuration\_ids) | List of custom error configuration Ids. |
| <a name="output_appgw_frontend_ip_configuration_ids"></a> [appgw\_frontend\_ip\_configuration\_ids](#output\_appgw\_frontend\_ip\_configuration\_ids) | List of frontend IP configuration Ids. |
| <a name="output_appgw_frontend_port_ids"></a> [appgw\_frontend\_port\_ids](#output\_appgw\_frontend\_port\_ids) | List of frontend port Ids. |
| <a name="output_appgw_gateway_ip_configuration_ids"></a> [appgw\_gateway\_ip\_configuration\_ids](#output\_appgw\_gateway\_ip\_configuration\_ids) | List of IP configuration Ids. |
| <a name="output_appgw_http_listener_frontend_ip_configuration_ids"></a> [appgw\_http\_listener\_frontend\_ip\_configuration\_ids](#output\_appgw\_http\_listener\_frontend\_ip\_configuration\_ids) | List of frontend IP configuration Ids from HTTP listeners. |
| <a name="output_appgw_http_listener_frontend_port_ids"></a> [appgw\_http\_listener\_frontend\_port\_ids](#output\_appgw\_http\_listener\_frontend\_port\_ids) | List of frontend port Ids from HTTP listeners. |
| <a name="output_appgw_http_listener_ids"></a> [appgw\_http\_listener\_ids](#output\_appgw\_http\_listener\_ids) | List of HTTP listener Ids. |
| <a name="output_appgw_id"></a> [appgw\_id](#output\_appgw\_id) | The ID of the Application Gateway. |
| <a name="output_appgw_name"></a> [appgw\_name](#output\_appgw\_name) | The name of the Application Gateway. |
| <a name="output_appgw_nsg_id"></a> [appgw\_nsg\_id](#output\_appgw\_nsg\_id) | The ID of the network security group from the subnet where the Application Gateway is attached. |
| <a name="output_appgw_nsg_name"></a> [appgw\_nsg\_name](#output\_appgw\_nsg\_name) | The name of the network security group from the subnet where the Application Gateway is attached. |
| <a name="output_appgw_public_ip_address"></a> [appgw\_public\_ip\_address](#output\_appgw\_public\_ip\_address) | The public IP address of Application Gateway. |
| <a name="output_appgw_public_ip_domain_name"></a> [appgw\_public\_ip\_domain\_name](#output\_appgw\_public\_ip\_domain\_name) | Domain Name part from FQDN of the A DNS record associated with the public IP. |
| <a name="output_appgw_public_ip_fqdn"></a> [appgw\_public\_ip\_fqdn](#output\_appgw\_public\_ip\_fqdn) | Fully qualified domain name of the A DNS record associated with the public IP. |
| <a name="output_appgw_redirect_configuration_ids"></a> [appgw\_redirect\_configuration\_ids](#output\_appgw\_redirect\_configuration\_ids) | List of redirect configuration Ids. |
| <a name="output_appgw_request_routing_rule_backend_address_pool_ids"></a> [appgw\_request\_routing\_rule\_backend\_address\_pool\_ids](#output\_appgw\_request\_routing\_rule\_backend\_address\_pool\_ids) | List of backend address pool Ids attached to request routing rules. |
| <a name="output_appgw_request_routing_rule_backend_http_settings_ids"></a> [appgw\_request\_routing\_rule\_backend\_http\_settings\_ids](#output\_appgw\_request\_routing\_rule\_backend\_http\_settings\_ids) | List of HTTP settings Ids attached to request routing rules. |
| <a name="output_appgw_request_routing_rule_http_listener_ids"></a> [appgw\_request\_routing\_rule\_http\_listener\_ids](#output\_appgw\_request\_routing\_rule\_http\_listener\_ids) | List of HTTP listener Ids attached to request routing rules. |
| <a name="output_appgw_request_routing_rule_ids"></a> [appgw\_request\_routing\_rule\_ids](#output\_appgw\_request\_routing\_rule\_ids) | List of request routing rules Ids. |
| <a name="output_appgw_request_routing_rule_redirect_configuration_ids"></a> [appgw\_request\_routing\_rule\_redirect\_configuration\_ids](#output\_appgw\_request\_routing\_rule\_redirect\_configuration\_ids) | List of redirect configuration Ids attached to request routing rules. |
| <a name="output_appgw_request_routing_rule_rewrite_rule_set_ids"></a> [appgw\_request\_routing\_rule\_rewrite\_rule\_set\_ids](#output\_appgw\_request\_routing\_rule\_rewrite\_rule\_set\_ids) | List of rewrite rule set Ids attached to request routing rules. |
| <a name="output_appgw_request_routing_rule_url_path_map_ids"></a> [appgw\_request\_routing\_rule\_url\_path\_map\_ids](#output\_appgw\_request\_routing\_rule\_url\_path\_map\_ids) | List of URL path map Ids attached to request routing rules. |
| <a name="output_appgw_ssl_certificate_ids"></a> [appgw\_ssl\_certificate\_ids](#output\_appgw\_ssl\_certificate\_ids) | List of SSL certificate Ids. |
| <a name="output_appgw_subnet_id"></a> [appgw\_subnet\_id](#output\_appgw\_subnet\_id) | The ID of the subnet where the Application Gateway is attached. |
| <a name="output_appgw_subnet_name"></a> [appgw\_subnet\_name](#output\_appgw\_subnet\_name) | The name of the subnet where the Application Gateway is attached. |
| <a name="output_appgw_url_path_map_default_backend_address_pool_ids"></a> [appgw\_url\_path\_map\_default\_backend\_address\_pool\_ids](#output\_appgw\_url\_path\_map\_default\_backend\_address\_pool\_ids) | List of default backend address pool Ids attached to URL path maps. |
| <a name="output_appgw_url_path_map_default_backend_http_settings_ids"></a> [appgw\_url\_path\_map\_default\_backend\_http\_settings\_ids](#output\_appgw\_url\_path\_map\_default\_backend\_http\_settings\_ids) | List of default backend HTTP settings Ids attached to URL path maps. |
| <a name="output_appgw_url_path_map_default_redirect_configuration_ids"></a> [appgw\_url\_path\_map\_default\_redirect\_configuration\_ids](#output\_appgw\_url\_path\_map\_default\_redirect\_configuration\_ids) | List of default redirect configuration Ids attached to URL path maps. |
| <a name="output_appgw_url_path_map_ids"></a> [appgw\_url\_path\_map\_ids](#output\_appgw\_url\_path\_map\_ids) | List of URL path map Ids. |
| <a name="output_resource_group_name"></a> [resource\_group\_name](#output\_resource\_group\_name) | Resource group name |
| <a name="output_password"></a> [password](#output\_password) | Password used for certificate generation, key vault certificate upload and VMs. |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
